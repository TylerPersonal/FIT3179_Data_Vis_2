{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "data": {"url": "https://raw.githubusercontent.com/TylerPersonal/Vis2_data/main/lat_long_state_areas.csv"},
  "config": {
    "background":null,
    "title": {"fontSize":24, "font":"Oswald"},
    "axis": {"labelFont": "Oswald", "titleFont": "Oswald"},
    "legend": {"labelFont": "Oswald", "titleFont": "Oswald"},
    "mark": {"font": "Oswald"},
    "view": {"stroke":"transparent"}},
    "params": [{
      "name": "Temp_Above",
      "value": 40,
      "bind": {
        "input": "range",
        "min": 40,
        "max": 200,
        "step": 10,
        "name": "Surface Temp Above: "
      }}],
  "vconcat": [
    {
    "width": 450,
    "height": 380,
    "title": {"text":"Fires Seen Via Satellite Across The Nation", "align": "center"},
    "projection": {"type": "equirectangular"},
    "layer": [{"data": {"url": "https://raw.githubusercontent.com/TylerPersonal/Vis2_data/main/aus_states_map.json",
    "format": {"type": "topojson", "feature": "aus_state"}},
    "mark": {"type": "geoshape", "fill": "#f7f2e5", "stroke": "lightgray"}},
    {
      "transform": [{"calculate": "datum.brightness - 273", "as": "Surface Temperature"},
        {"calculate": "format(datum['Surface Temperature'], '.1f')", "as": "decimal_temp"},
        {"filter": "datum.brightness - 273 > Temp_Above"},
        {"filter": {"param": "time_brush"}}],
        "encoding": {"longitude": {"field": "longitude", "type": "quantitative"},
          "latitude": {"field": "latitude", "type": "quantitative"},
          "size": {"value":8},
          "color":{"scale":{"domain": [70, 100, 130, 160],
          "type": "threshold",
          "range": ["#fc9272","#ef3b2c", "#cb181d", "#a50f15", "#67000d"]},
      "field": "Surface Temperature",
      "type": "quantitative",
      "legend": {"orient": "none", "legendY":0, "legendX":-30, "titleAlign":"left", "titleFontSize":15}},
          "tooltip": [{"field": "state", "type": "nominal", "title": "State"},
          {"field": "acq_date", "type": "temporal", "title": "Date"},
          {"field": "Surface Temperature", "type": "quantitative"},
          {"field":"latitude"},{"field":"longitude"}]},
      "layer": [
      {"mark": {"type": "circle", "tooltip": {"content": "data"}}},
      {"mark": {"type": "text", "dy": 20, "fontWeight":"bold"},
      "transform": [{"window": [{"op": "rank", "as": "ranking"}],
      "sort": [{"field": "Surface Temperature", "order": "descending"}]},
      {"filter": "datum.ranking == 1"},{"calculate": "'The hottest recorded fire in this period: ' + datum['decimal_temp']", "as": "text_annotation"}], 
      "encoding": {"text": {"field": "text_annotation", "type": "nominal"}, "size":{"value":10}, "color": {"value":"black"}}}]}]},
{"width": 450,
"height": 100,
"mark": "line",
"title": "Line Chart To Filter Data Based On Time",
"transform": [{"filter": "datum.brightness - 273 > Temp_Above"}],
"params": [{"name": "time_brush",
"select": {"type": "interval", "encodings": ["x"]}}],
"encoding": {"color":{"value":"#cb181d"},"x": {"field": "acq_date",
"timeUnit": "yearmonth",
"axis": {"title": "", "format": "%Y"}},
"y": {"aggregate": "count",
"axis": {"tickCount": 3, "grid": false},
"title": "Count"},
"tooltip": [{"aggregate": "count", "type": "quantitative", "title": "Fires"},
          {"field": "acq_date", "timeUnit": "yearmonth", "type": "temporal", "title": "Year-Month"}]}}
]}
